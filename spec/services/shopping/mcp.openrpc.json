{
  "openrpc": "1.3.2",
  "info": {
    "title": "UCP Shopping Service",
    "version": "2026-01-11",
    "description": "Canonical MCP/JSON-RPC interface for UCP Shopping service. Schema references are logical pointers - actual payload shape is determined by negotiated capabilities.\n\n**Endpoint Resolution:** This spec defines methods only. The endpoint URL MUST be obtained from the merchant's discovery profile at `/.well-known/ucp` under `services[\"dev.ucp.shopping\"].mcp.endpoint`. The server entry below is a placeholder for tooling compatibility."
  },
  "servers": [
    {
      "name": "merchant",
      "url": "{endpoint}",
      "description": "Merchant-provided endpoint from UCP discovery profile",
      "variables": {
        "endpoint": {
          "default": "https://merchant.example.com/ucp/mcp",
          "description": "Obtain from /.well-known/ucp â†’ services[\"dev.ucp.shopping\"].mcp.endpoint"
        }
      }
    }
  ],
  "methods": [
    {
      "name": "create_checkout",
      "summary": "Create a checkout",
      "params": [
        {
          "name": "checkout",
          "required": true,
          "schema": {"$ref": "https://ucp.dev/schemas/shopping/checkout.json"}
        }
      ],
      "result": {
        "name": "checkout",
        "schema": {"$ref": "https://ucp.dev/schemas/shopping/checkout.json"}
      }
    },
    {
      "name": "get_checkout",
      "summary": "Get checkout",
      "params": [
        {
          "name": "id",
          "required": true,
          "schema": {"type": "string"}
        }
      ],
      "result": {
        "name": "checkout",
        "schema": {"$ref": "https://ucp.dev/schemas/shopping/checkout.json"}
      }
    },
    {
      "name": "update_checkout",
      "summary": "Update checkout",
      "params": [
        {
          "name": "id",
          "required": true,
          "schema": {"type": "string"}
        },
        {
          "name": "checkout",
          "required": true,
          "schema": {"$ref": "https://ucp.dev/schemas/shopping/checkout.json"}
        }
      ],
      "result": {
        "name": "checkout",
        "schema": {"$ref": "https://ucp.dev/schemas/shopping/checkout.json"}
      }
    },
    {
      "name": "complete_checkout",
      "summary": "Complete checkout and place order",
      "params": [
        {
          "name": "id",
          "required": true,
          "schema": {"type": "string"}
        },
        {
          "name": "payment",
          "required": false,
          "schema": {"$ref": "https://ucp.dev/schemas/shopping/payment.json"}
        },
        {
          "name": "idempotency_key",
          "required": true,
          "schema": {"type": "string", "format": "uuid"}
        }
      ],
      "result": {
        "name": "checkout",
        "schema": {"$ref": "https://ucp.dev/schemas/shopping/checkout.json"}
      }
    },
    {
      "name": "cancel_checkout",
      "summary": "Cancel checkout",
      "params": [
        {
          "name": "id",
          "required": true,
          "schema": {"type": "string"}
        },
        {
          "name": "idempotency_key",
          "required": true,
          "schema": {"type": "string", "format": "uuid"}
        }
      ],
      "result": {
        "name": "checkout",
        "schema": {"$ref": "https://ucp.dev/schemas/shopping/checkout.json"}
      }
    },
    {
      "name": "search_catalog",
      "summary": "Search for products in the catalog",
      "params": [
        {
          "name": "request",
          "required": true,
          "schema": {"$ref": "https://ucp.dev/schemas/shopping/catalog.json#/$defs/search_request"}
        }
      ],
      "result": {
        "name": "response",
        "schema": {"$ref": "https://ucp.dev/schemas/shopping/catalog.json#/$defs/search_response"}
      }
    },
    {
      "name": "get_catalog_item",
      "summary": "Get a product or variant by ID",
      "description": "Returns the parent product with context. For product IDs, variants may contain a representative set. For variant IDs, variants contains only the requested variant.",
      "params": [
        {
          "name": "id",
          "required": true,
          "schema": {"type": "string", "description": "Global ID (GID) of product or variant."}
        },
        {
          "name": "context",
          "schema": {"$ref": "https://ucp.dev/schemas/shopping/types/context.json", "description": "Location and market context. Platforms MAY geo-detect from request; provided fields MUST override."}
        }
      ],
      "result": {
        "name": "response",
        "schema": {"$ref": "https://ucp.dev/schemas/shopping/catalog.json#/$defs/get_item_response"}
      }
    },
    {
      "name": "search_merchants",
      "summary": "Search for merchants",
      "params": [
        {
          "name": "request",
          "required": true,
          "schema": {"$ref": "https://ucp.dev/schemas/shopping/merchant.json#/$defs/search_request"}
        }
      ],
      "result": {
        "name": "response",
        "schema": {"$ref": "https://ucp.dev/schemas/shopping/merchant.json#/$defs/search_response"}
      }
    },
    {
      "name": "get_merchant",
      "summary": "Get a merchant by ID",
      "params": [
        {
          "name": "id",
          "required": true,
          "schema": {"type": "string", "description": "Global ID (GID) of merchant."}
        },
        {
          "name": "context",
          "schema": {"$ref": "https://ucp.dev/schemas/shopping/types/context.json", "description": "Location and market context. Platforms MAY geo-detect from request; provided fields MUST override."}
        }
      ],
      "result": {
        "name": "response",
        "schema": {"$ref": "https://ucp.dev/schemas/shopping/merchant.json#/$defs/get_merchant_response"}
      }
    }
  ]
}
